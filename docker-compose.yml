services:
  whisper-service:
    build:
      context: ./python-service
      dockerfile: Dockerfile
    volumes:
      - ./audio/input:/audio/input
      - ./audio/output:/audio/output
      - whisper-models:/root/.cache/whisper
    environment:
      - INPUT_FOLDER=/audio/input
      - OUTPUT_FOLDER=/audio/output
      - WHISPER_MODEL=base
      - PYTHONUNBUFFERED=1
    restart: unless-stopped
    deploy:
      resources:
        limits:
          memory: 4G

volumes:
  whisper-models: